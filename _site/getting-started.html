<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title>Mediachain : Getting Started</title>
        <meta name="description" content="Docs for the Mediachain Project">

        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/css/syntax.css">
        <link rel="stylesheet" href="/css/main.css">
        <link rel="shortcut icon" type="image/png" href="/favicon.png"/>
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    </head>
    <body>

        <div class="container">
            <div class="row">
                <div id="header" class="col-sm-12">
                    <h4><a class="brand" href="/">Mediachain</a>
    <small>Docs for the Mediachain Project</small>
</h4>

                </div>
            </div>

            <div class="row">
                <div id="navigation" class="col-sm-3">
                    <ul class="nav nav-list">
    
      
      
      <h4>Installation and Setup</h4>
      
      
        <li>
          <a href="/install">Installing Mediachain</a>
          
        </li>
      
        <li>
          <a href="/cloud-deploy">Using Mediachain Deploy</a>
          
        </li>
      
        <li>
          <a href="/getting-started">Getting Started</a>
          
            <div id="nav_current"></div>
          
        </li>
      
        <li>
          <a href="/nat">Configuring NAT Traversal</a>
          
        </li>
      
        <li>
          <a href="/ssh-tunnel">Controlling a remote node with SSH Tunneling</a>
          
        </li>
      
    
      
      
      <h4>Using Mediachain</h4>
      
      
        <li>
          <a href="/basic-operations">Basic Operations</a>
          
        </li>
      
        <li>
          <a href="/advanced-operations">Advanced Operations</a>
          
        </li>
      
    
      
      
      <h4>Publishing Data</h4>
      
      
        <li>
          <a href="/schema-recommendations">Recommended Schemas</a>
          
        </li>
      
    
      
      
      <h4>Mediachain Architecture</h4>
      
      
        <li>
          <a href="/statements-and-objects">Statements and Objects</a>
          
        </li>
      
        <li>
          <a href="/mcql">MCQL</a>
          
        </li>
      
    
<!-- List additional links. It is recommended to add a divider
    e.g. <li class="divider"></li> first to break up the content. -->
</ul>

                </div>

                <div id="content" class="col-sm-9">
                    <div class="page-header">
    <h1>Getting Started
        
    </h1>
</div>

<ul id="table_of_contents">
  <li><a href="#starting-a-new-node">Starting a new node</a></li>
  <li><a href="#bringing-the-node-online">Bringing the node online</a>    <ul>
      <li><a href="#configuring-the-directory">Configuring the directory</a></li>
    </ul>
  </li>
  <li><a href="#taking-the-node-online">Taking the node online</a></li>
  <li><a href="#next-steps">Next steps</a></li>
</ul>

<p>Welcome to Mediachain! This guide will help you get started with a newly-installed mediachain node.
For help with installation, please check out the <a href="/install">Installation Guide</a>, then come back
here.</p>

<p>This guide will assume that you’ve installed <code>mcnode</code> and <code>mcclient</code> on your local computer, and
you want to get your node ready to use.  If you’ve <a href="/cloud-deploy">deployed your node
to the cloud</a>, everything will work just the same, but you’ll need to
<a href="/ssh-tunnel">set up an SSH tunnel to control your node</a>.</p>

<h2 id="starting-a-new-node">Starting a new node</h2>
<p>Let’s start our node!</p>

<p>You can run your local mediachain node by invoking <code>mcnode</code> without arguments:</p>

<pre><code>$ mcnode
2016/10/20 19:29:24 Generating new node identity
2016/10/20 19:29:25 Saving key to /home/vyzo/.mediachain/mcnode/identity.node
2016/10/20 19:29:25 Node ID: QmeBkfxcaBfA9pvzivRwhF2PM7sXpp4HHQbp7jfTkRCWEa
2016/10/20 19:29:25 Generating new publisher identity
2016/10/20 19:29:25 Saving key to /home/vyzo/.mediachain/mcnode/identity.publisher
2016/10/20 19:29:25 Publisher ID: 4XTTMADSKQUN3jkeZngbtuE35w9y5YnDTicVTeeji7N2Npkey
2016/10/20 19:29:25 Node is offline
2016/10/20 19:29:25 Serving client interface at 127.0.0.1:9002
</code></pre>

<p>The first time you run <code>mcnode</code>, it will generate a pair of persistent identities and
initialize the local store. By default, <code>mcnode</code> uses <code>~/.mediachain/mcnode</code> as its
root directory, but you can change this using the <code>-d path/to/mcnode/home</code> command line option.</p>

<h2 id="bringing-the-node-online">Bringing the node online</h2>
<p>By default, the node starts disconnected from the p2p network and provides a client control
api in localhost.
You can control and use your node through the api using curl, but it is recommended
to <a href="/install#installing-aleph">install Aleph</a>.
Aleph provides a fully featured client for <code>mcnode</code> named <code>mcclient</code> and we use it in
the examples below.</p>

<p>Once your node is up and running you can check its status:</p>

<pre><code>$ mcclient id
Peer ID: QmeBkfxcaBfA9pvzivRwhF2PM7sXpp4HHQbp7jfTkRCWEa
Publisher ID: 4XTTMADSKQUN3jkeZngbtuE35w9y5YnDTicVTeeji7N2Npkey
Info:
$ mcclient status
offline
</code></pre>

<p>Since our status is <code>offline</code>, we can’t reach other peers, and attempting to do so will
result in an error:</p>

<pre><code>$ mcclient listPeers
Internal Server Error
Error: Node is offline
</code></pre>

<p>Let’s fix that by setting a directory server and taking our node online.</p>

<h3 id="configuring-the-directory">Configuring the directory</h3>
<p>At this point you should designate a directory for looking up peers.  We’ll use the
<a href="https://github.com/multiformats/multiaddr">multiaddress</a> of the Mediachain Labs public directory,
<code>/ip4/52.7.126.237/tcp/9000/p2p/QmSdJVceFki4rDbcSrW7JTJZgU9so25Ko7oKHE97mGmkU6</code>.</p>

<pre><code>$ mcclient config dir /ip4/52.7.126.237/tcp/9000/p2p/QmSdJVceFki4rDbcSrW7JTJZgU9so25Ko7oKHE97mGmkU6
set directory to /ip4/52.7.126.237/tcp/9000/p2p/QmSdJVceFki4rDbcSrW7JTJZgU9so25Ko7oKHE97mGmkU6
</code></pre>

<p>The directory allows you to contact other nodes that have registered themselves by setting
their status to <code>public</code>.  When contacting a remote node, we use their Peer ID, which is an
encoded <a href="https://github.com/multiformats/multihash">multihash</a> that’s derived from the node’s public key.  The directory
maps Peer IDs to routable addresses that our node can use to connect to others.</p>

<p>Setting the directory does not make your node visible to others; for that we need to set our
status to <code>public</code>.  We’ll do that in a little while; first lets take our node online so that
it can query the directory and contact other peers.</p>

<h2 id="taking-the-node-online">Taking the node online</h2>
<p>Set the node’s status to <code>online</code>:</p>

<pre><code>$ mcclient status online
status set to online
</code></pre>

<p>Now we can query the directory for the list of registered peers:</p>

<pre><code>$ mcclient listPeers
...
QmeiY2eHMwK92Zt6X4kUUC3MsjMmVb2VnGZ17DhnhRPCEQ
...
</code></pre>

<p>And learn more about them:</p>

<pre><code>$ mcclient id QmeiY2eHMwK92Zt6X4kUUC3MsjMmVb2VnGZ17DhnhRPCEQ
Peer ID: QmeiY2eHMwK92Zt6X4kUUC3MsjMmVb2VnGZ17DhnhRPCEQ
Publisher ID: 4XTTM4K8sqTb7xYviJJcRDJ5W6TpQxMoJ7GtBstTALgh5wzGm
Info: Metadata for CC images from DPLA, 500px, and pexels; operated by Mediachain Labs.
</code></pre>

<p>We can also get the <code>Info</code> string alongside the directory listing with <code>mcclient listPeers --info</code>:</p>

<pre><code>$ mcclient listPeers --info
QmTVsocFCSEdPyM8dZ734GRhjvvmYyL9fShyezVkbPj17E -- Curated Museum Metadata; Operated by Mediachain Labs
QmeiY2eHMwK92Zt6X4kUUC3MsjMmVb2VnGZ17DhnhRPCEQ -- Metadata for CC images from DPLA, 500px, and pexels; operated by Mediachain Labs.
QmZ6dckUhRouVr6AsBTpK6vMLVpcz1KAeJAJVQEZQ5gCek -- Metadata for CC images from flickr; operated by Mediachain Labs.
...
</code></pre>

<h2 id="next-steps">Next steps</h2>

<p>See the <a href="/basic-operations">Basic Operations guide</a> to learn how to <a href="/basic-operations#query">query</a>,
<a href="/basic-operations#publishing-statements">publish data</a>, <a href="/basic-operations#merge">merge remote data</a> and make your node
<a href="/basic-operations#going-public">publicly accessible</a>.</p>



                </div>
            </div>

            <div class="row">
                <div id="footer" class="col-sm-12">
                    <a href="http://images.mediachain.io">Attribution Engine</a>
<a class="pl12" href="http://slack.mediachain.io">Slack</a>
<a href="https://github.com/mediachain">Github</a>
<a href="https://blog.mediachain.io">Blog</a>
<a href="https://twitter.com/mediachain_">Twitter</a>

                </div>
            </div>
        </div>
        

        <script type="text/javascript">
          $(function() {
            var toc = $('#table_of_contents');
            if (toc != null) {
              $('#nav_current').append(toc);
              toc.toggle(true);
            }
          })
        </script>
    </body>
</html>
