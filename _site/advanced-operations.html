<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title>Mediachain : Advanced Operations</title>
        <meta name="description" content="Docs for the Mediachain Project">

        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/css/syntax.css">
        <link rel="stylesheet" href="/css/main.css">
        <link rel="shortcut icon" type="image/png" href="/favicon.png"/>
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    </head>
    <body>

        <div class="container">
            <div class="row">
                <div id="header" class="col-sm-12">
                    <h4><a class="brand" href="/">Mediachain</a>
    <small>Docs for the Mediachain Project</small>
</h4>

                </div>
            </div>

            <div class="row">
                <div id="navigation" class="col-sm-3">
                    <ul class="nav nav-list">
    
      
      
      <h4>Installation and Setup</h4>
      
      
        <li>
          <a href="/install">Installing Mediachain</a>
          
        </li>
      
        <li>
          <a href="/cloud-deploy">Using Mediachain Deploy</a>
          
        </li>
      
        <li>
          <a href="/getting-started">Getting Started</a>
          
        </li>
      
        <li>
          <a href="/nat">Configuring NAT Traversal</a>
          
        </li>
      
        <li>
          <a href="/ssh-tunnel">Controlling a remote node with SSH Tunneling</a>
          
        </li>
      
    
      
      
      <h4>Using Mediachain</h4>
      
      
        <li>
          <a href="/basic-operations">Basic Operations</a>
          
        </li>
      
        <li>
          <a href="/advanced-operations">Advanced Operations</a>
          
            <div id="nav_current"></div>
          
        </li>
      
    
      
      
      <h4>Publishing Data</h4>
      
      
        <li>
          <a href="/schema-recommendations">Recommended Schemas</a>
          
        </li>
      
    
      
      
      <h4>Mediachain Architecture</h4>
      
      
        <li>
          <a href="/statements-and-objects">Statements and Objects</a>
          
        </li>
      
        <li>
          <a href="/mcql">MCQL</a>
          
        </li>
      
    
<!-- List additional links. It is recommended to add a divider
    e.g. <li class="divider"></li> first to break up the content. -->
</ul>

                </div>

                <div id="content" class="col-sm-9">
                    <div class="page-header">
    <h1>Advanced Operations
        
    </h1>
</div>

<h2 id="datastore-management">Datastore management</h2>

<h3 id="garbage-collection">Garbage Collection</h3>

<p>After deleting statements from your node, you can reclaim space by running a garbage collection
pass on your node’s datastore.  Mediachain separates storage into a statement database (which
powers the queries), and an object datastore, which contains the metadata objects.  Since an
object may be referenced by more than one statement, it isn’t safe to automatically delete objects
after a <code>DELETE</code> query.</p>

<p>Garbage collection removes any data objects which are no longer referenced by any statements.
Note that the node must be offline during the collection process.</p>

<pre><code># show the current status of the node
$ mcclient status
online

# go offline
$ mcclient status offline
status set to offline

# trigger GC
$ mcclient data gc
Garbage collected 5 objects

# bring the node back online
$ mcclient status online
</code></pre>


                </div>
            </div>

            <div class="row">
                <div id="footer" class="col-sm-12">
                    <a href="http://images.mediachain.io">Attribution Engine</a>
<a class="pl12" href="http://slack.mediachain.io">Slack</a>
<a href="https://github.com/mediachain">Github</a>
<a href="https://blog.mediachain.io">Blog</a>
<a href="https://twitter.com/mediachain_">Twitter</a>

                </div>
            </div>
        </div>
        

        <script type="text/javascript">
          $(function() {
            var toc = $('#table_of_contents');
            if (toc != null) {
              $('#nav_current').append(toc);
              toc.toggle(true);
            }
          })
        </script>
    </body>
</html>
